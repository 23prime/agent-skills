---
name: reviewing-changes
description: コミット前の未コミット変更（ステージ済み・未ステージ）をバグやロジックミスに焦点を当てて素早くレビューする。コミット前にワーキングツリーの変更を手軽にコードレビューしたい場合に使用する。
translated_from: SKILL.md
---

# Reviewing Changes

## ワークフロー

### 1. diff の収集

以下を実行し、未追跡ファイルを含むすべての変更を取得する:

1. `git diff HEAD` — 追跡ファイルのステージ済み・未ステージの変更
2. `git ls-files --others --exclude-standard` — 未追跡ファイルの一覧
3. 各未追跡ファイルに対し `git diff --no-index /dev/null <file>` を実行して diff を生成する

すべての出力をレビュー対象として結合する。diff と未追跡ファイル一覧の両方が空の場合、レビュー対象の変更がないことをユーザーに伝える。

### 2. diff のレビュー

以下の優先度（高い順）で diff を精査する:

1. **バグとロジックエラー** — off-by-one、null/undefined アクセス、比較演算子の誤り、戻り値の欠落、無限ループ、競合状態
2. **意図しない動作変更** — ロジックの誤削除、引数の入れ違い、デフォルト値の変更
3. **セキュリティ上の懸念** — ハードコードされたシークレット、インジェクション脆弱性、システム境界での入力バリデーション欠如
4. **明らかな改善点** — diff で導入されたデッドコード、明らかに冗長な処理

スタイル、フォーマット、命名、ドキュメントについては、直接バグの原因とならない限りコメントしない。

### 3. 結果の報告

発見事項をファイルごとにグループ化した簡潔なリストとして提示する。各項目には:

- diff 内のファイル名と該当行の概算位置を記載する
- 問題を一文で説明する
- 修正が明白な場合は修正案を提示する

問題が見つからなかった場合はその旨を簡潔に述べる。冗長な表現や称賛は避け、速度とシグナルを重視する。
