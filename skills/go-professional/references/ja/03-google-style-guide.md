# Google Go Style Guide

## 概要

これはGoogleのGoコードに関する規範的かつ正式なスタイルガイドである。本ドキュメントは、Googleのコードベース内で読みやすく保守可能なGoコードを書くための原則を確立する。

## スタイル原則

本ガイドは、読みやすいコードの5つの中核的な属性を重要度順に識別している。

1. **明瞭性(Clarity)** – コードの目的と根拠が読者に明らかである
2. **簡潔性(Simplicity)** – 最も直接的なアプローチで目標が達成される
3. **簡潔さ(Concision)** – 高いシグナル対ノイズ比で雑音が最小限である
4. **保守性(Maintainability)** – 将来の変更が容易になるよう設計されている
5. **一貫性(Consistency)** – より広いコードベースのパターンとの整合性がある

### 明瞭性

可読性は著者の視点ではなく読者の視点に焦点を当てる。2つの次元が重要である。

- **目的**:コードが何をするかは、説明的な命名、コメント、空白、モジュール構造を通じて明白であるべきである
- **根拠**:コードがこのように機能する理由は、言語のニュアンス、ビジネスロジックの微妙な点、または明白でないAPIの使用法を扱う際に説明が必要である

本ガイドは「何をするかではなく、なぜするかを説明するコメント」を強調している。これにより将来の誤解を防ぐ。冗長なコメントよりも自己説明的なシンボル名が望ましい。

### 簡潔性

「Goコードはその目標を達成する最もシンプルな方法で書かれるべきである。」シンプルなコードは:

- 上から下へ論理的に読める
- 不必要な抽象化レイヤーを避ける
- 値の伝播と決定を明確にする
- 有用なエラーメッセージとテスト診断を提供する

複雑性は意図的に導入されるべきであり、通常はパフォーマンス最適化のためであり、根拠を説明するドキュメントを伴うべきである。

**最小メカニズム**の原則は次を推奨する:まずコア言語構造を優先し、次に標準ライブラリツール、その次にGoogleの内部ライブラリ、最後に外部依存関係を使用する。

### 簡潔さ

簡潔なコードは、明確な命名と構造を通じて関連する詳細を強調する。反復を減らすメカニズム(テーブル駆動テストなど)はシグナル対ノイズ比を改善する。読者は一般的なイディオムを素早く認識すべきである。逸脱には説明的なコメントが必要である。

### 保守性

コードは最初の記述よりもはるかに多くの編集を受ける。保守可能なコードは:

- 将来のプログラマーを正しい変更へと導く
- 優雅に成長するAPIを採用する
- 不必要な結合を避ける
- 明確な診断を持つ包括的なテストを含む

インターフェースや型のような抽象化はコンテキスト情報を除去する。それらの複雑性コストを正当化するには注意深いドキュメントが必要である。

### 一貫性

一貫したコードは、より広いコードベースのパターンやチームの規約と整合する。スタイルガイドの原則が衝突する場合、一貫性がしばしば決定要因となる。特にパッケージ内では重要である。

## 中核ガイドライン

### フォーマット

全てのGoファイルは`gofmt`ツールの出力に準拠しなければならず、プリサブミットチェックで強制される。生成されたコードも`format.Source`のようなツールを使用してフォーマットされるべきである。

### 命名規約

Goはエクスポートされた識別子に`MixedCaps`を、エクスポートされていないものに`mixedCaps`を使用する。snake caseではなくcamel caseに従う(例:`MaxLength`であって`MAX_LENGTH`ではない)。

### 行の長さ

固定の行の長さは適用されない。リファクタリングが行分割よりも優先される。行はインデント変更の前や長い文字列(URLなど)を収容するために分割すべきではない。

### 命名ガイダンス

名前は使用コンテキストでの重複を避け、すでに明白な概念を繰り返すことに抵抗すべきである。より具体的なガイダンスはスタイルガイドの決定セクションに記載されている。

### ローカルな一貫性

ガイドがガイダンスを提供しない場合、チームはファイルまたはパッケージ内で一貫したローカルプラクティスを確立してもよい。無効なローカル考慮事項には、行長制限やアサーションベースのテストライブラリが含まれる。逸脱は既存の問題を悪化させたりバグを導入してはならない。

---

**出典**: [Google Style Guide – Go](https://google.github.io/styleguide/go/guide)
